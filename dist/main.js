(()=>{"use strict";const e=(e,t,n)=>!e||e.power<t?{power:t,id:n}:e,t=document.querySelector(".grid"),n=document.querySelectorAll(".cell"),a=document.querySelector(".btn"),k=document.getElementById("result");let l,c="PLAYER",o=!0,r=!1;const i=()=>{c="PLAYER"===c?"COMPUTER":"PLAYER"},E=e=>{document.getElementById(e).textContent="PLAYER"===c?"X":"O"},s=e=>{const t=(e=>{for(let t=0;t<3;t++){if(e[3*t].taken&&e[3*t].taken===e[3*t+1].taken&&e[3*t].taken===e[3*t+2].taken)return e[t].taken;if(e[t].taken&&e[t].taken===e[t+3].taken&&e[t].taken===e[t+6].taken)return e[t].taken}return e[0].taken&&e[0].taken===e[4].taken&&e[0].taken===e[8].taken?e[0].taken:e[2].taken&&e[2].taken===e[4].taken&&e[2].taken===e[6].taken?e[2].taken:e.every((e=>e.taken))?"DRAW":null})(e);t&&(k.textContent="DRAW"===t?"DRAW":t+" WON",r=!0)};function u(){r=!1,c="PLAYER",l=[{cell:1,taken:null},{cell:2,taken:null},{cell:3,taken:null},{cell:4,taken:null},{cell:5,taken:null},{cell:6,taken:null},{cell:7,taken:null},{cell:8,taken:null},{cell:9,taken:null}].slice(),n.forEach((e=>e.textContent="")),o&&(t.addEventListener("click",(t=>{(t=>{if(r)return;const n=+t.target.dataset.id;l[n-1].taken||(l[n-1].taken=c,E(n),i(),s(l),r||(()=>{const t=(t=>{const n=t.filter((e=>!e.taken));let a;for(let n=0;n<3;n++){if(!t[3*n+2].taken&&t[3*n].taken&&t[3*n].taken===t[3*n+1].taken){const k="COMPUTER"===t[3*n].taken;a=e(a,k?100:80,3*n+2)}if(!t[3*n+1].taken&&t[3*n].taken&&t[3*n].taken===t[3*n+2].taken){const k="COMPUTER"===t[3*n].taken;a=e(a,k?100:80,3*n+1)}if(!t[3*n].taken&&t[3*n+1].taken&&t[3*n+1].taken===t[3*n+2].taken){const k="COMPUTER"===t[3*n+1].taken;a=e(a,k?100:80,3*n)}if(!t[n+6].taken&&t[n].taken&&t[n].taken===t[n+3].taken){const k="COMPUTER"===t[n].taken;a=e(a,k?100:80,n+6)}if(!t[n+3].taken&&t[n].taken&&t[n].taken===t[n+6].taken){const k="COMPUTER"===t[n].taken;a=e(a,k?100:80,n+3)}if(!t[n].taken&&t[n+3].taken&&t[n+3].taken===t[n+6].taken){const k="COMPUTER"===t[n+3].taken;a=e(a,k?100:80,n)}}if(!t[8].taken&&t[0].taken&&t[0].taken===t[4].taken){const n="COMPUTER"===t[0].taken;a=e(a,n?100:80,8)}if(!t[4].taken&&t[0].taken&&t[0].taken===t[8].taken){const n="COMPUTER"===t[0].taken;a=e(a,n?100:80,4)}if(!t[0].taken&&t[4].taken&&t[4].taken===t[8].taken){const n="COMPUTER"===t[4].taken;a=e(a,n?100:80,0)}if(!t[6].taken&&t[2].taken&&t[2].taken===t[4].taken){const n="COMPUTER"===t[2].taken;a=e(a,n?100:80,6)}if(!t[4].taken&&t[2].taken&&t[2].taken===t[6].taken){const n="COMPUTER"===t[2].taken;a=e(a,n?100:80,4)}if(!t[2].taken&&t[4].taken&&t[4].taken===t[6].taken){const n="COMPUTER"===t[4].taken;a=e(a,n?100:80,2)}for(let l of n)if(5===l.cell&&(a=e(a,50,l.cell-1)),1===l.cell||3===l.cell||7===l.cell||9===l.cell){let n=0;const c=(k=l.cell)<4?0:k<7?1:2;"COMPUTER"!==t[3*c].taken&&"COMPUTER"!==t[3*c+1].taken&&"COMPUTER"!==t[3*c+2].taken||(n+=13.1),t[3*c].taken||t[3*c+1].taken||t[3*c+2].taken||(n+=4.1),"PLAYER"!==t[3*c].taken&&"PLAYER"!==t[3*c+1].taken&&"PLAYER"!==t[3*c+2].taken||(n+=8.1),a=e(a,3*Math.random()+5+n,l.cell-1)}var k;if(a)return t[a.id].cell;{const e=Math.ceil(Math.random()*n.length);return console.log(e),n[e-1].cell}})(l);l[t-1].taken=c,E(t),i(),s(l)})())})(t)})),o=!1)}a.addEventListener("click",u),u()})();